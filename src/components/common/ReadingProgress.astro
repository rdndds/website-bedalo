---

---

<div
  id="reading-progress"
  class="fixed top-0 left-0 right-0 h-1 z-50 pointer-events-none"
>
  <div
    id="progress-bar"
    class="h-full bg-gradient-to-r from-primary to-accent w-0 transition-all duration-100"
  >
  </div>
</div>

<script>
  let scrollHandler: (() => void) | null = null;

  document.addEventListener('astro:page-load', () => {
    const progressBar = document.getElementById('progress-bar');
    if (!progressBar) return;

    scrollHandler = () => {
      const scrollTop = window.scrollY;
      const docHeight =
        document.documentElement.scrollHeight - window.innerHeight;
      const progress = docHeight > 0 ? (scrollTop / docHeight) * 100 : 0;
      progressBar.style.width = `${Math.min(progress, 100)}%`;
    };

    window.addEventListener('scroll', scrollHandler, { passive: true });
    scrollHandler();
  });

  document.addEventListener('astro:before-swap', () => {
    if (scrollHandler) {
      window.removeEventListener('scroll', scrollHandler);
      scrollHandler = null;
    }
  });
</script>
