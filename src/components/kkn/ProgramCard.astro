---
interface Props {
  title: string;
  kategori: string;
  status: string;
  lokasi: string;
  tanggal?: string;
  ringkasan: string;
  impact?: string;
}

const { title, kategori, status, lokasi, tanggal, ringkasan, impact } = Astro.props;

const kategoriConfig: Record<string, { icon: string; color: string }> = {
  pendidikan: { icon: 'ğŸ“š', color: 'bg-blue-100 text-blue-700' },
  kesehatan: { icon: 'ğŸ¥', color: 'bg-green-100 text-green-700' },
  ekonomi: { icon: 'ğŸ’°', color: 'bg-yellow-100 text-yellow-700' },
  lingkungan: { icon: 'ğŸŒ¿', color: 'bg-emerald-100 text-emerald-700' },
  keagamaan: { icon: 'ğŸ•Œ', color: 'bg-purple-100 text-purple-700' },
  pariwisata: { icon: 'ğŸ–ï¸', color: 'bg-cyan-100 text-cyan-700' },
  lainnya: { icon: 'ğŸ“‹', color: 'bg-gray-100 text-gray-700' },
};

const statusConfig: Record<string, { label: string; color: string }> = {
  selesai: { label: 'Selesai', color: 'bg-green-500 text-white' },
  berjalan: { label: 'Berjalan', color: 'bg-blue-500 text-white' },
  lanjutan: { label: 'Lanjutan', color: 'bg-orange-500 text-white' },
  rekomendasi: { label: 'Rekomendasi', color: 'bg-purple-500 text-white' },
};

const katConfig = kategoriConfig[kategori] || kategoriConfig.lainnya;
const statConfig = statusConfig[status] || statusConfig.selesai;

function formatDate(dateStr: string): string {
  const date = new Date(dateStr);
  return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'short', year: 'numeric' });
}
---

<div
  class="program-card bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all"
  data-kategori={kategori}
  data-status={status}
>
  <div class="p-6">
    <div class="flex items-start justify-between gap-3 mb-4">
      <div class={`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${katConfig.color}`}>
        <span>{katConfig.icon}</span>
        <span class="capitalize">{kategori}</span>
      </div>
      <span class={`px-3 py-1 rounded-full text-xs font-semibold ${statConfig.color}`}>
        {statConfig.label}
      </span>
    </div>
    
    <h3 class="text-lg font-bold text-gray-900 mb-2 line-clamp-2">{title}</h3>
    
    <p class="text-gray-600 text-sm mb-4 line-clamp-3">{ringkasan}</p>
    
    <div class="space-y-2 text-sm text-gray-500">
      <p class="flex items-center gap-2">
        <span>ğŸ“</span>
        <span>{lokasi}</span>
      </p>
      {tanggal && (
        <p class="flex items-center gap-2">
          <span>ğŸ“…</span>
          <span>{formatDate(tanggal)}</span>
        </p>
      )}
    </div>
    
    {impact && (
      <div class="mt-4 pt-4 border-t border-gray-100">
        <p class="text-xs text-gray-500 mb-1">Dampak:</p>
        <p class="text-sm text-gray-700 line-clamp-2">{impact}</p>
      </div>
    )}
  </div>
</div>
